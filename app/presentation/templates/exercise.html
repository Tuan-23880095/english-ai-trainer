{% extends "base.html" %}
{% block title %}Exercise{% endblock %}
{% block content %}
<div class="exercise-main-container">
    <h2>English Speaking Assistant</h2>
    <div style="margin-bottom: 14px;">
      <label for="topic" style="font-weight:500">Chủ đề luyện tập:</label>
      <select id="topic" style="font-size:1em;padding:6px 12px;">
        <option value="Daily Conversation">Daily Conversation</option>
        <option value="Interview">Interview</option>
        <option value="Travel">Travel</option>
        <option value="Education">Education</option>
        <option value="Random">Random</option>
      </select>
      <button id="btn-new-session" style="margin-left:8px;background:#19a7ce;">Bắt đầu chủ đề mới</button>
    </div>
    <div id="status-exercise" style="min-height:1.4em;color:#1b478e;margin-bottom:5px"></div>
    <div class="chatbox" id="chatbox"></div>
    <div id="feedback-vi" style="margin:14px 0 8px 0; color:#c0392b; font-size:1.08em; font-weight:500"></div>
    <div id="vocab-blocks"></div>
    <div class="input-area">
        <button class="voice-btn" id="btn-voice">🎤 Nói tiếng Anh</button>
        <button class="tts-btn" id="btn-tts">🔊 Nghe lại</button>
        <br/><br/>
        <textarea id="inputText" placeholder="Bạn hãy nói hoặc nhập nội dung..."></textarea>
        <br/>
        <button id="btn-send">Send</button>
        <button id="btn-clear" style="background:#e63946">Xóa hội thoại</button>
        <button id="btn-history" style="background:#cddc39">Lịch sử</button>
    </div>
    <div id="history-modal" style="display:none;position:fixed;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,.3);z-index:9999">
      <div style="background:#fff;max-width:640px;margin:48px auto;padding:24px 32px;border-radius:12px;position:relative">
        <b>Lịch sử hội thoại</b>
        <button onclick="document.getElementById('history-modal').style.display='none'"
          style="position:absolute;top:16px;right:24px;font-size:1.2em;background:#eee;padding:2px 9px;border-radius:7px">×</button>
        <div id="history-content" style="margin-top:18px;max-height:350px;overflow:auto;font-size:1.07em;"></div>
      </div>
    </div>
</div>
{% endblock %}
{% block script %}
<script type="module" src="/static/js/exercise.js"></script>
{% endblock %}
